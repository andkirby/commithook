<?xml version="1.0"?>
<config>
    <interpreters>
        <FullCommitMsg>
            <formatting>
                <default>
                    <regular>~^__format__~</regular>
                    <format>__verb__ __issue_key__: __summary__</format>
                    <key>
                        <!--Please make the same order like in format node-->
                        <!--Regular expressions SHOULD NOT contain braces-->
                        <verb>Implemented|Fixed|CR Changes?|Refactored</verb>
                        <issue_key>[A-Z0-9]{2,}-[0-9]+</issue_key>
                        <summary>[^\n]+</summary>
                    </key>
                </default>
            </formatting>
        </FullCommitMsg>
    </interpreters>

    <formatters>
        <ShortCommitMsg>
            <formatting>
                <default>
                    <format>__verb__ __issue_key__: __summary__</format>
                </default>
            </formatting>
        </ShortCommitMsg>
    </formatters>

    <!--Validators setup-->
    <validators>
        <CommitMessage>
            <match>
                <merge>/^Merge /</merge>
                <revert>/^Revert /</revert>
                <full>
                    <interpreter>
                        <class>\PreCommit\Interpreter\FullCommitMsg</class>
                        <!--<options>
                            <type>default</type>
                        </options>-->
                    </interpreter>
                    <required>
                        <verb>1</verb>
                        <issue_key>1</issue_key>
                        <summary>1</summary>
                    </required>
                </full>
            </match>
        </CommitMessage>
        <IssueType>
            <issue>
                <tracker>
                    <!--JIRA specific types-->
                    <jira>
                        <!--JIRA issue-type map to general issue-type-->
                        <type>
                            <!-- Tasks -->
                            <Task>1</Task>
                            <Sub_Task_Task>1</Sub_Task_Task>
                            <Change_Request>1</Change_Request>
                            <Improvement>1</Improvement>
                            <!-- Bugs -->
                            <Bug>1</Bug>
                        </type>
                    </jira>
                </tracker>
            </issue>
        </IssueType>
    </validators>

    <filters>
        <ShortCommitMsg>
            <issue>
                <formatter>
                    <class>\PreCommit\Filter\ShortCommitMsg\Formatter</class>
                    <!--<options>
                        <type>default</type>
                    </options>-->
                </formatter>
                <tracker>
                    <!--JIRA specific types-->
                    <jira>
                        <!--JIRA issue-type map to general issue-type-->
                        <type>
                            <!-- Tasks -->
                            <Task>task</Task>
                            <Sub_Task_Task>task</Sub_Task_Task>
                            <Change_Request>task</Change_Request>
                            <Improvement>task</Improvement>
                            <!-- Bugs -->
                            <Bug>bug</Bug>
                        </type>
                    </jira>
                </tracker>

                <!--Short verb version for quick message-->
                <short_verb>
                    <!--For tasks at all-->
                    <I>Implemented</I>
                    <!--Functionality wasn't changed - refactoring only-->
                    <R>Refactored</R>
                    <!--Something was fixed. For bugs only-->
                    <F>Fixed</F>
                    <!--Applying Code Review Changes-->
                    <C>CR Changes</C>
                </short_verb>

                <!--If the verb was omitted-->
                <default_type_verb>
                    <task>I</task>
                    <bug>F</bug>
                </default_type_verb>
            </issue>
        </ShortCommitMsg>
    </filters>

    <!--Hooks process setup-->
    <hooks>
        <commit-msg>
            <message>
                <type>default</type>
            </message>
        </commit-msg>
    </hooks>
</config>
